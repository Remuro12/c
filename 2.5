#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define int long long
int isspace (char c)
{
    return c == '\0' || c == '\n'   || c == ' ';
}
int wc (char * src)
{
    int n = strlen(src);
    int wnum = 0;
    if (n == 0)
        return 0;
    int isword = 0;
    for(int i = 0; i < n; ++i)
    {
        if (!isspace(src[i]))
        {
            isword = 1;
        }
        else if (isword)
        {
            ++wnum;
            isword = 0;
        }
    }
    if (isword)
        ++wnum;
    return wnum;
}
char ** extract (char *src)
{
    int n = strlen(src);
    int isword = 0;
    int lbord = 0;
    char** words = NULL;
    int cur = 0;
    for(int i = 0; i < n; ++i)
    {
        if (!isspace(src[i]) && (!isword))
        {
            isword = 1;
            lbord = i;
        }
        else if (isspace(src[i]) && isword)
        {
            words = realloc(words, (cur + 1) * sizeof(char*));
            words[cur] = calloc(i - lbord, sizeof(char));
//            words[cur] = realloc(words[cur], (i - lbord) * sizeof(char));
            strncpy(words[cur], (src + lbord), i - lbord);
            words[cur][i - lbord] = 0;
            ++cur;
            isword = 0;
        }
    }
    if (isword)
    {
        words = realloc(words, (cur + 1) * sizeof(char*));
        words[cur] = calloc(n - lbord, sizeof(char));
        strncpy(words[cur], (src + lbord), n - lbord);
        words[cur][n - lbord] = 0;
    }
    return words;
}
char ** words;
void csort(char *src)
{
    words = extract(src);
    int wnum = wc(src);
    for (int i = 0; i < wnum; ++i)
    {
        printf("%s", words[i]);
    }

}


signed main()
{
    char * s = "aaa  bbb  ccc  ddd";
    csort(s);


} //2.5 extract
